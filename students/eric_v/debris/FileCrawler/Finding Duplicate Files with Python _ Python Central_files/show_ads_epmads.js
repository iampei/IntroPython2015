var epmads_key,epmads_channel,epmads_code_format,epmads_ads_host,epmads_ads_host_overridden,epmads_click,epmads_custom_params,epmads_width,epmads_height,epmads_target_id,epmads_template_target_id,EpmadsConfig,EpmadsAdsConfig=EpmadsConfig,CustomWLAdServer=CustomWLAdServer||{requests:[]};try{var messageEventListener=function(event){if(event&&event.data&&"string"==typeof event.data){if(0==event.data.indexOf("rrImpl")){try{eval("CustomWLAdServer."+event.data)}catch(e){console.warn(e)}return!0}if(0==event.data.indexOf("sendRequestInfo:")){var key=event.data.substring(16),req=CustomWLAdServer.findRepReqByKey(key);if(null!=req)return req.elemId&&document.getElementById(req.elemId)&&document.getElementById(req.elemId).contentWindow&&document.getElementById(req.elemId).contentWindow.postMessage("requestInfoMessage:"+JSON.stringify(req),"*"),!0}if(0==event.data.indexOf("requestInfoMessage:")){try{var reqFromMessage=JSON.parse(event.data.substring(19));reqFromMessage.epmads_code_format="ads-async.js";var existingReq=reqFromMessage.epmads_key?CustomWLAdServer.findRepReqByKey(reqFromMessage.epmads_key):null;if(existingReq)for(var prop in reqFromMessage)existingReq[prop]=reqFromMessage[prop];else reqFromMessage.epmads_target_id||(reqFromMessage.epmads_target_id="epom-"+reqFromMessage.epmads_key+(reqFromMessage.epmads_width?"-"+reqFromMessage.epmads_width+"x"+reqFromMessage.epmads_height:"")),CustomWLAdServer.requests.push(reqFromMessage)}catch(e){console.warn(e)}return!0}}return!1};CustomWLAdServer.windowListener||(CustomWLAdServer.windowListener=messageEventListener,window.addEventListener?window.addEventListener("message",messageEventListener):window.attachEvent&&window.attachEvent("message",messageEventListener)),("undefined"==typeof CustomWLAdServer.requests||null==CustomWLAdServer.requests)&&(CustomWLAdServer.requests=[])}catch(err){console.warn(err)}"undefined"!=typeof epmads_ads_host_overridden&&(epmads_ads_host=epmads_ads_host_overridden);var console=window.console||{warn:function(){}};CustomWLAdServer.onReady=function(e){window.addEventListener?window.addEventListener("DOMContentLoaded",e,!1):window.attachEvent("onload",e)},CustomWLAdServer.addCampaignId=function(e){if("undefined"==typeof this.campaignIds)this.campaignIds=e;else try{null==new RegExp("(^|,)"+e+"($|,)").exec(this.campaignIds)&&(this.campaignIds+=","+e)}catch(t){this.campaignIds+=","+e}},CustomWLAdServer.getCampaignIds=function(){return this.campaignIds||""},CustomWLAdServer.getPageIdentifier=function(){return window.performance&&window.performance.timing&&window.performance.timing.domainLookupEnd||0},CustomWLAdServer.rrImpl=function(e,t,o,r){var i=this.findRepReqByKey(e);if(null!=i){for(var n in o)i[n]=o[n];return t&&(i.excluded=i.excluded||[],"CURRENT"==r?i.excluded=[t]:"ALL"==r&&-1==i.excluded.indexOf(t)?(i.excluded.push(t),i.excluded.length>100&&i.excluded.splice(0,1)):i.excluded=[]),i.repeated=!0,i.invoker?new i.invoker(i).invoke():new EpmadsInvokeServer(i).invoke(),!0}return!1},CustomWLAdServer.findRepReqByKey=function(e){if(this.requests)for(var t=0;t<this.requests.length;t++)for(var o in this.requests[t])if(o&&o.indexOf&&o.indexOf("_key")==o.length-4&&this.requests[t][o]===e)return this.requests[t];return null},CustomWLAdServer.repeatRequest=function(e,t,o,r){return CustomWLAdServer.rrImpl(e,t,o,r)},CustomWLAdServer.isFF=function(){return-1!=navigator.userAgent.toLowerCase().indexOf("firefox")},CustomWLAdServer.canWrite=function(){var e="r"+Math.random().toString(36).substr(2);document.write('<p id="'+e+'"></p>');var t=document.getElementById(e);return t?(t.parentNode.removeChild(t),!0):!1},CustomWLAdServer.getEpmadsCookiesFromLocalStorage=function(){try{if("localStorage"in window&&null!==window.localStorage&&null!==localStorage&&null!==typeof localStorage&&"undefined"!=typeof localStorage&&"undefined"!=typeof localStorage.EpmadsCookies){var e=[],t=JSON.parse(localStorage.EpmadsCookies);for(var o in t)e.push(o+"="+t[o]);return 0==e.length?"":"&"+e.join("&")}}catch(r){}return""},CustomWLAdServer.testElms=function(e){if(void 0!==e){var t,o=document.getElementById(e),r=o.childNodes;o.style.cssText+="height:0;margin:0;padding:0;border:0;background:transparent;font-size:0;";for(var i=r.length-1;i>=0;i--){var n=r[i];if(void 0!==n.tagName)if("style"==n.tagName.toLowerCase()||"script"==n.tagName.toLowerCase())t=!1;else{var s=window.getComputedStyle?getComputedStyle(n,""):n.currentStyle,d=s.position;if("static"==d||"relative"==d||!d){t=!0;break}}else if("#text"==n.nodeName&&n.nodeValue.replace(/^\s+|\s+$/g,"").length>0){t=!0;break}}t&&(o.style.height="auto",o.style.fontSize="")}},CustomWLAdServer.execBodyScripts=function(e,t){function o(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()}function r(e,t){if(e){var o,i;if(e.src){o=document.getElementsByTagName("head")[0],i=document.createElement("script"),i.src=e.src;var n=!!window.ActiveXObject;if(n){var s=!1;i.onreadystatechange=function(){s||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(s=!0,r(t.shift(),t),i.onreadystatechange=null)}}else i.onload=function(){r(t.shift(),t)};o.insertBefore(i,o.firstChild)}else{var d=e.text||e.textContent||e.innerHTML||"";o=document.getElementsByTagName("head")[0]||document.documentElement,i=document.createElement("script"),i.type="text/javascript";try{i.appendChild(document.createTextNode(d))}catch(a){i.text=d}o.insertBefore(i,o.firstChild),r(t.shift(),t)}}}var i,n,s=[],d=e.getElementsByTagName("*");for(n=0;d[n];n++)i=d[n],!o(i,"script")||i.type&&"text/javascript"!==i.type.toLowerCase()||s.push(i);r(s.shift(),s)};var EpmadsInvokeServer=function(e){this.type=e.epmads_code_format,this.key=e.epmads_key,this.elemId=e.elemId,this.repeated=e.repeated,"undefined"==typeof e.epmads_channel?this.channel="":this.channel=e.epmads_channel,"undefined"==typeof e.epmads_click?this.click="":this.click=e.epmads_click,"undefined"==typeof e.epmads_custom_params?this.params={}:this.params=e.epmads_custom_params,"undefined"==typeof e.epmads_target_id?this.target_id=null:this.target_id=e.epmads_target_id,"undefined"==typeof e.epmads_template_target_id?this.template_target_id=null:this.template_target_id=e.epmads_template_target_id,"undefined"==typeof e.epmads_ads_host?this.ads_host=null:this.ads_host=e.epmads_ads_host,"undefined"==typeof e.epmads_width?this.width="":this.width=e.epmads_width,"undefined"==typeof e.epmads_height?this.height="":this.height=e.epmads_height,void 0!==typeof e.cuwl_passback_tag&&(this.passbackTag=e.cuwl_passback_tag),void 0!==typeof e.excluded&&(this.excluded=e.excluded),this.referer=e.epmads_referer};if(EpmadsInvokeServer.prototype={isUrlRegEx:/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/i,getScreenResolution:function(){try{return"&scrWidth="+window.screen.width+"&scrHeight="+window.screen.height}catch(e){return""}},toQueryString:function(e){var t=[];for(var o in e)t.push("cp."+o+"="+e[o]);return 0==t.length?"":"&"+t.join("&")},getHost:function(){if(this.ads_host){var e=this.params.custom_ads_host;return("https:"==location.protocol?"https:":"http:")+(e?"//"+e:this.ads_host)}for(var t,o=document.getElementsByTagName("script"),r=o.length-1;r>=0;r--){var i=o[r];if(-1!=i.src.indexOf("/js/show_ads_epmads.js")){t=i.src;break}}return t.substr(0,t.indexOf("/js/show_ads_epmads.js"))},getReqUrl:function(){return"string"==typeof this.referer&&this.isUrlRegEx.test(this.referer)?"&requestUrl="+encodeURIComponent(this.referer):"string"==typeof document.URL&&this.isUrlRegEx.test(document.URL)?"&requestUrl="+encodeURIComponent(document.URL):""},getReqRef:function(){return"string"==typeof document.referrer&&this.isUrlRegEx.test(document.referrer)?"&requestRef="+encodeURIComponent(document.referrer):""},getFlashVer:function(){var e,t,o,r;if(navigator.plugins&&navigator.plugins.length>0){t=navigator.plugins;for(var i=0;i<t.length&&!r;i++)o=t[i],o.name.indexOf("Shockwave Flash")>-1&&(r=o.description.split("Shockwave Flash ")[1])}else{o="ShockwaveFlash.ShockwaveFlash";try{e=new ActiveXObject(o+".7"),r=e.GetVariable("$version")}catch(n){}if(!r)try{e=new ActiveXObject(o+".6"),r="WIN 6,0,21,0",e.AllowScriptAccess="always",r=e.GetVariable("$version")}catch(n){}if(!r)try{e=new ActiveXObject(o),r=e.GetVariable("$version")}catch(n){}r&&(r=r.split(" ")[1].split(","),r=r[0]+"."+r[1]+" r"+r[2])}return r?r:"-"},getUrl:function(){var e="";if(this.excluded)for(j in this.excluded)e+="&excluded="+this.excluded[j];return this.getHost()+"/"+this.type+"?v=1&key="+this.key+"&ch="+this.channel+"&click="+this.click+"&tz="+(new Date).getTimezoneOffset()/-60+"&t="+(new Date).getTime()+(this.passbackTag?"&pb="+this.passbackTag:"")+e+this.getReqUrl()+this.getReqRef()+"&flashVer="+this.getFlashVer()+(this.width?"&epmads_width="+this.width:"")+(this.height?"&epmads_height="+this.height:"")+this.toQueryString(this.params)+CustomWLAdServer.getEpmadsCookiesFromLocalStorage()+this.getScreenResolution()},invokeIframeSync:function(){if(this.repeated&&this.elemId&&document.getElementById(this.elemId)){var e=this.getUrl();return void(document.getElementById(this.elemId).src=e+(-1!=e.indexOf("?")?"&":"?")+"iis3352_rnd="+Math.random())}this.write("<iframe src='"+this.getUrl()+"&adsCampaignKey="+CustomWLAdServer.getPageIdentifier()+'\' framespacing="0" frameborder="no" scrolling="no" width="'+this.width+'" height="'+this.height+'"'+(this.elemId?" id='"+this.elemId+"'":"")+"></iframe>")},invokeIframeAsync:function(){var e=document.createElement("iframe");e.src=this.getUrl()+"&tarId="+this.target_id+"&templTarId="+this.template_target_id+"&cIds="+CustomWLAdServer.getCampaignIds()+"&adsCampaignKey="+CustomWLAdServer.getPageIdentifier(),e.width=this.width,e.id=this.elemId,e.height=this.height,e.frameBorder="0",e.scrolling="no",this.append(this.target_id,e)},append:function(e,t){var o=document.getElementById(e);if(o){for(;!this.template_target_id&&o.childNodes.length>0;)o.removeChild(o.childNodes[0]);o.appendChild(t)}else this.onReady(function(){if(o=document.getElementById(e)){for(;!this.template_target_id&&o.childNodes.length>0;)o.removeChild(o.childNodes[0]);o.appendChild(t)}else console.warn("Can't find element with id: "+e)})},onReady:function(e){CustomWLAdServer.onReady(e)},invokeAsyncFromSyncData:function(){var e,t="div"+this.elemId;if(document.getElementById(t))e=document.getElementById(t);else{e=document.createElement("div"),e.id=t;var o=document.getElementById(this.elemId);o&&o.parentNode&&o.parentNode.insertBefore(e,o)}this.target_id=t,this.type="ads-async.js",this.invokeJsAsyncCode()},invokeJsSyncCode:function(){var e=this.getUrl()+"&cIds="+CustomWLAdServer.getCampaignIds()+"&adsCampaignKey="+CustomWLAdServer.getPageIdentifier();return this.repeated&&this.elemId&&document.getElementById(this.elemId)&&"complete"==document.readyState?void this.invokeAsyncFromSyncData():void this.write("<script type='text/javascript' src='"+e+"'"+(this.elemId?" id='"+this.elemId+"'":"")+"></script>")},invokeJsAsyncCode:function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=this.getUrl()+"&tarId="+this.target_id+"&templTarId="+this.template_target_id+"&cIds="+CustomWLAdServer.getCampaignIds()+"&adsCampaignKey="+CustomWLAdServer.getPageIdentifier(),this.append(this.target_id,e)},write:function(e){document.write(e)},invoke:function(){"ads"==this.type&&this.target_id?this.invokeIframeAsync():"ads"==this.type?this.invokeIframeSync():this.target_id?this.invokeJsAsyncCode():this.invokeJsSyncCode()}},"undefined"!=typeof epmads_key&&epmads_key&&"undefined"!=typeof epmads_code_format&&epmads_code_format&&("undefined"==typeof EpmadsAdsConfig||!CustomWLAdServer.isFF()||CustomWLAdServer.canWrite())){var syncConfig={epmads_code_format:epmads_code_format,epmads_key:epmads_key,epmads_channel:epmads_channel,epmads_click:epmads_click,epmads_custom_params:epmads_custom_params,epmads_width:epmads_width,epmads_height:epmads_height,epmads_ads_host:epmads_ads_host,epmads_target_id:epmads_target_id,epmads_template_target_id:epmads_template_target_id,epmads_referer:"string"==typeof epmads_referer?epmads_referer:null};syncConfig.elemId=epmads_key+"_sync",syncConfig.invoker=EpmadsInvokeServer,CustomWLAdServer.requests.push(syncConfig),new EpmadsInvokeServer(syncConfig).invoke(),epmads_key=void 0,epmads_channel=void 0,epmads_code_format=void 0,epmads_ads_host=void 0,epmads_click=void 0,epmads_custom_params=void 0,epmads_width=void 0,epmads_height=void 0,epmads_target_id=void 0,epmads_template_target_id=void 0}else if("undefined"!=typeof EpmadsAdsConfig&&"undefined"!=typeof EpmadsAdsConfig.ads&&EpmadsAdsConfig.ads.length>0){for(var EpmadsAdsConfigWait=[],i=0;i<EpmadsAdsConfig.ads.length;i++)"undefined"!=typeof ads_host_overridden&&(EpmadsAdsConfig.ads[i].epmads_ads_host=ads_host_overridden),EpmadsAdsConfig.ads[i].invoker=EpmadsInvokeServer,EpmadsAdsConfig.ads[i].elemId=EpmadsAdsConfig.ads[i].epmads_target_id+"-iframe",CustomWLAdServer.requests.push(EpmadsAdsConfig.ads[i]),new EpmadsInvokeServer(EpmadsAdsConfig.ads[i]).invoke();EpmadsAdsConfig.ads=EpmadsAdsConfigWait}